# coding=utf-8

import urllib.request
import urllib.parse
import requests

userAgent = "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36 Edg/87.0.664.66"

# 请求表单数据
first_data={
    "username":"2018002999",
    "password":"xq000812Mm.cn",
    "execution":"fbc3fd18-c383-4ffb-b435-891898c1491a_ZXlKaGJHY2lPaUpJVXpVeE1pSjkucDBIRXpFb2IxNjV6eW5PSHpnMkczVWE4VlJPclhFMDlqUGsrZEJkN2M0QktnbjhPY3dUcjN5Nk9Oc0ZmTjFsbjYrdzJFWEVxR2o5K1BKaXZQcXhJdnp4Q3VtZEs5SXZyZ3VBYUNEektjeHQyN0VKbU9rYUN2allTUkhPeC9ETmdsa00vTjJhU2Y0UVBDa3B6Q3ArTS81dmZFMURidjNVVGYranpCQytuRURPOHRHM2N2eE9QNDBwbWhrMXdmUVZ0MmRZakJLc0FoZEhkRWx0M3N2cDBYMzBBeEIrbzVoQ0RSVXRDeVdid1RWdC9YOEhWMDNIaXY3alQvYklheThsSE8ySDFDT2c5dTRVOS91bEZZSksrR1FnSnY2ZGw1SGtEN1Aya2dZSDhVWklCbEVNcERqSFUzcE9Kd3I3YzJGY0xZZWxnS2NCTmV3RWZOMFNWK1NhTFhhcFFJUkRXRG1lZXBRZHdTaktTTmRTK2hTdHdpWllxaGs4dDZKRHdWZmFDdDVyZG9wL2ZDQTB4UGEzbmhRS2ZzL3lqdmJldHg5SVZpRTBHOHhIbkh4U1BSeDNiNWtySGtQd1NERnh3L2IrWmlHWEdYM3FGaitiRnhPTVZqSDlJazNpWlVYWEJTUzBwOThZU2RWU3VuVExVSHhvY2VwTzkxT0lwUkxiYnpkc3VxWlIvOHRuVUduSHptOEFhdUNlVm0vTUhKNE9Sa1JkV2hQc0w3cjdqdytPb1hvT2F4K1RNelFQbGo2UVhtZkNyTmlDd2dHaXRmVDZQT1VyakZNNzlyY0JHNHpiMHFJczlQZFZIck96aFlyYVdZVGF0ZVVqWkZOd3Z6TFhhcW5aNHlYdXpmSS93TzV2MDk1czF5dllaUlVSV1ZqcDloM0xRV0hrS3c4MWVZVS9pb0xnN29Wc0ZBM04rbmZUOVdHQ3h5Z1JpK0kyckFYd1V6dFJzZmlLWlY2YjNPd0hNaU5yVHZxYW1nazIzUlBPTnVzZjg3N1ozbW9iUXBvUnkrMmRlM1p1cThJNXE4MGpYR3pLU0x5M2c4VnFtZHByQjBHMXMrWGhSdDZpWGZLajdEczV6anBtMDBJU2lUajU5YzdRSGoySHh6SDA4VVNrLzkwVXNENHdLL0pPc3g0VUlKT3ltL1R6d2xQTEJrb2hvRXJhcWE5d3VtZDVkbk5YTWRVTHUvbzJLNXNpLzEydEtNclUrV09lYkI0Z3NGc1l4dHZ5UVQraGwzcVE0c0VpV3lsUzE0eVBKdWhxVWUvbGZUTkhScFdPUk03MUxLbWdiRTJ4RE43aUtmVm51L1UrOVNTSCtFQzBzMVJCQi9PcXFRTjU5RzY4aG5JQXR2K2Q3a1pxUnFWRWxyTXE3clY4TStXSEl3cVZzSEM2M2tOZ2VyekIzYUNPYXhNWlB3SHJma2t4RUtxTVROK3hldUdCUFNqeDNIWmFjaERrV3RQN3I3QklELy9pUFJtdFhkQW9QdmdCVjlrN25kUDJNYTRJODNIWXVzNmFGSWVlcjljTDEyeDJyUzlGZ3RGTDUwQTZoV1pUUS9CbWN6ZklFOFAvUnVXUXAyMzRvTGFJUDFRLzdYQUxiT2VyUkdEY01HTWRwRjc4NE9EajYzZnNyU1VzRkxTZElIUW1rSU9LL2doaXdMaytvRkZuc1Mra0w0ZlpsdlZTYnl0dFo1bjNTc0o3MU1ULzlDQTVtcFRQblowRDMyWjFZbEU5ckZNdWc3VjRWcFA2c0RGVUFFR3VPL2UxTnpKRHdBa0x6NU0yczlhWXc2TDBCbGpTK3ZCY0J3OUovL2dhTGhDM3Z4N0hoRWJpczlxUm1WeFIrV0hhV3pGeEtqOFYzWU03Nk9CTDJJZVZ0WGV5N0t1T1liRlByUkZmbFJGbUV0L3hDMkZMUGRrc3FXU1FFT3I2MFhjNWRlTFRHejREMXdRN3A2N2c1MEFQSmtRY3I3RGdKQnBrbENzbndQbUZtcUtWZkM0ZDhsZGxoU0NJUytWZU9PaXhpR2YxcHFwbGhEY1BIcjhvTjMrQUJWVmZRV2k3aEZFRXN2UjlNWWpWWHlyUEh1eFE0VGtQa2dMemFGR0ZhZi9KRXJoQTlKei92V3dWa25jWUp1ZWZmaWwrMnJHUHdpeUM3dXQ4a0w0TUlVanJCc05ZU01VVCtJV2N4YzBVeVBIWDdoNXJtTVJZRzEyckx1dlNUS25IZnpPWVNyemJKYzkwU0Frc29xZVk2YlRhQXl3Mjh4bXVrWWYzV21EY0J5UFlldmNOc0pKdVovRER2RGVoOFVleFpPelV1TzloZXdBNjFScktuN202TnkzbFBWVCtleUovR3hqTnpMS1dPTVZQZWxKV0VtQitDeXFMUkNuQW1weHUyOGFXYjNDUTdLM0RuYklhUkxFUzVIeHlLZENnSEJYRHJEbjJIS1o2WERXa3pKRkpVWE5WYXltN1JDSGM4bzRyci9xZnJ0N243RzU2VURiV2Y5QjVNWjJaM1VYcmJKUmdUb2ZZN0ttbDFtU3IzRnNUUjl0QngxaHN0YTRZL3NiemdDak5KVlFCL2E0bmM1QlR5dG1UL0dBZVZoUk13cUhrRlFIYSsxdi92ZXFjRHZmSVo5SDVlYnFJUkdHbGxwZlhuUTR0OFpUSFoyQktnUXEvNmlDdDgvT011TkJTM3FId2R6N3o4T28rM3k2b0tTc2ZqS2I0d1YwOWxMeE5mM3BweVpLMGlvRFFEMEZvRzhFTElSenJMQ1A0VG1ld0xoQTFJQjVlTU4rNjF4MVFuTCtMREZCeGFoblJUUE04VTU5b2hoSUw2UzUvdFhJOHZ0amVpV3Y4TkYvUlp2VXdVVmVQOVdYaTJMbXgxb3R2d0NId1UrTmhmcTJGajFSSTVQZXBUeElGMDRtcTNoYVlPazE1RnM0MERxK1MrRGdHVWlITXh1ZWI3dkp0VjVncnZSanZKVDk4d2NTT0c1NlRjY0dTMzgvZFFxcnFtSXYzem1aNmNyNEl5MmxuTkEydDJ3bkxXL29FUzdWQVF4WmhlSEpZKzgyUXB3RnZiM1RubHBxaUdWZHJmbUdXaXJZUG03OGhLd1oxRGtCZ1VIYm1YNDFXdkhHNVEyYmtZN2FuekdydkZXeENCeis4cngxYzUxVEVGRlRGMldYY25VbnRaU2ZkT3NxNzI4bi8xT0xHa0VvVThJZHlPN3BaZHpqM3JNaFRXZVZhTlhpbSt6bklYeThjRTBKTzNlNXpZRnA2WGVscC9xcU5IOTl4U3N1bVVLQXNsT0RlbFlZelJTcnpHejM5SG1Kd1d4aXdsc0llT3FHRUJZdTU3aWVUaUY3a2FLOVluaCtSMWpPa1RCdy9LUUs2TlpUanVHenZJWDhLVzVnVkIyVk1xTnMySTBTN2RjejRCWloxaE1uRlFJNDdqOEhkRmFYQnFhUkN6SE1pQ212VnZDUlZsYnQwVjlRNUFoOVFPSjVzMzZVY1hqelIvbGdhMFF5K0FuK083enJ3TW9PUmR6LzFOeGY4UUZMVXN3U1VlRjc0cCtvNHF5SzNIN1VoZ0tpVmVwdnROeUhOK1d4LytmVlNTYzhReGFEYXFHeGxqbUlRS0FMaEQyZWQ5ZWkzK3RyamxySnJlbnk4VktJQS9zMGNscVlsZWlYSUlPVWZOR01SNzZERmZPeVVSUytyd2FJc1hWT2UwWlltcDNHR3hQRVhSREJPWUlXc0pkekRNdmhNa0sxdWJjOG5oUmk3VVhTbVZUbGc1Vlp1T1E3a0hKNjc2WldCcVBVZGJUbWNsay9mWGtrc3lRcFlRVGVmWHNwVlloQnhxME5NT2JQMWpKdGtVNGNxd1Z3YWJTVkVsalpiZis5ZlFmRS81d1JXRERBb1cvKzdySDAyOWhPYzBrNTNkcVlqTFMzaU5XVkRPNytWWDVKZjFEQUUyZEdKNDJmOTFuRUdLbHJNcXQwUmVaKzRBVjc3Uld3RnNoMGFVSXRUYUNnRVNUUDFtdnFZd0dTWkp5cTc3OVlXRUEwWERtcEJEL0JRSTFtdDVqd1kzQUlaVDFCdXVCOENUYUV3TVE2b1VrN1VoenAxM1lMd0tVSnZDWkRqaHVjYS8vemlVMTE4K2hqVG1aWnRvQmVVajc5U3lFcTltYzZGaXhTTkRrSmVaaDlDQnFMUExFRmlHbkRYUzhFY0I5NzZwL01qSXBCNFhVaDZUN24zN0g5TUFhTkczR3hZcTFMTklrcmRzeVEvNlBvVDVCYy9vN3NFU3ROZmJxUkViRTdNM0dTTlZrMTZsU20vMnJkaGEyMFlkYnR5Y1NseFBPbVdzUVpyVmRzSDRKRWNEelpxMkNPUkNaczNvaXdUaHVCa2l3TWlmd2EzcE4zelRUVkIzSk45NFo4Yjl6eUJxU2ZJZ09CamJzUVBLZytkMU9lN3lQS043MElRSXFvQ3ZlVjFKVTVzQkdkRE9qM1VZM3Rlb2toRDhNLzl0Tk9YSW1jL0t1TzdBMVNNajVPQUJ2eW1yb0ltd2c5QVpOK2QvUUlXclFvdnNpcWxYSHJyV29RS3lMSE1Lb3ZaSXhmQXVia1hia081aTlUQW1LS0pLbFRhbGRBOFVrbGYySzAwdGNiQi9uNFduRTY1SGpRRWRoRnJwajlkNUhUeVJ3Y3lCUTJMWEJZNnpFVW9YcnNQVnRLeXo1RFdQVW9LZGUvQW84RklHSXVZSld6cDE4R2V1TjBpNDloTkJOSCt4RjluUGNMZnI5dVlFZ2dLcVlCWWlOTjRZSGxKUTd1Mmw1SWFxc3MwMXlEamg4TWVvMVV4NDQ3WVphTHhXWU1MQWd4YnZlZ2NzT0hLTUlsVlFldEJqOGRERTQ5eDNiWk91eVVjOXBjTU5JeWxKWWdYZzBJcWZsZDZkSGozTjZGalNINk95WkNyVkJ5SDlsdE0zeHg1MmkrUWtsRXRSVW9Jc0VkNVd1Q0JKN1hYZUVodzg1R0U0L1dFMDdYSE51RVJxSDIveUZ1RkQ5ZWs9LlBMejNlLS1UTjVuRnhrN192N3F1SGdfZWJwUlhiVnVsZ2RuVTRGTTIyWWktZ1oyRVA4Qm5sdjlNZExoVmtNWmRCZlVnSk9IRld1VUpHU1lmeGZlTVdn",
    "_eventId":"submit",
    "geolocation":""
}
first_url="http://mysso-cust-edu-cn-s.webvpn.cust.edu.cn:8118/cas/login?service=http://portal-cust-edu-cn-s.webvpn.cust.edu.cn:8118/custp/shiro-cas"
seconde_url="http://jwgls2-cust-edu-cn-s.webvpn.cust.edu.cn:8118/api/ClientStudent/Home/StudentHomeApi/QueryStudentScheduleData?sf_request_type=ajax"
temp_url="http://portal-cust-edu-cn-s.webvpn.cust.edu.cn:8118/custp/index"
seconde_data=bytes(urllib.parse.urlencode({"param":"JTdCJTdE","__permission":{"MenuID":"00000000-0000-0000-0000-000000000000","Operation":0},"__log":{"MenuID":"00000000-0000-0000-0000-000000000000","Logtype":6,"Context":"查询"}}),encoding="utf-8")

headers={'User-agent':userAgent}
session = requests.Session()
resp = session.post(first_url, first_data)
resp=session.get(temp_url)
print(session.cookies.get_dict())
print(resp.content.decode("utf-8"))

# resp = session.post(seconde_url,seconde_data)
# print(resp.content.decode("utf-8"))
# response = urllib.request.urlopen(req)
# print(response.read().decode("utf-8"))
